doctype html
html
    head
        meta(name='keywords', content='Wickham, HTML, CSS')
        meta(name='description', content='HTML and CSS Tutorial with examples')
        meta(http-equiv='content-type', content='text/html; charset=utf-8')
        meta(name='viewport', content='width=device-width, initial-scale=1, maximum-scale=1')
        link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css', integrity='sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u', crossorigin='anonymous')
        title List all kit
        //if ie
          style(type='text/css').
            html { scrollbar-face-color: #ccccc2; scrollbar-shadow-color: #ccccc2; scrollbar-highlight-color: #ccccc2; scrollbar-3dlight-color: #ccccc2; scrollbar-darkshadow-color: #ccccc2; scrollbar-track-color: #e9e9e2; scrollbar-arrow-color: #e9e9e2; }
        style(type='text/css', media='all').
            canvas {
                -moz-user-select: none;
                -webkit-user-select: none;
                -ms-user-select: none;
            }

            /* set a left margin to compensate for IE/Win always making room for a scrollbar */
            html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
            /* set a left margin to compensate for IE/Win always making room for a scrollbar */
            div#middlewrap {
                width: 100%;
                padding-bottom: 50px;
                height: 100%;
            }
            /* set left margin for modern browsers */
            body>div#middlewrap {
                margin-left:0;
            }
            div#middle {
                width:100%;
                margin:0 auto;
                height: 100%
            }
            /* no positioning for IE5/Win - the whole page scrolls */
            div#footerwrap {
                width:100%;
                position:absolute;
                bottom:0;
                left:0;
                height:50px;

            }
            body>div#footerwrap {
                position:fixed;
            }
            div#footer {
                height:50px;
                width:720px;
                margin:0 auto;
            }
            #bottomNav a {
                font-size: 12pt;
                color: #ddd;
                text-decoration: none;
            }

            #bottomNav a:hover {
                color: #fff;
            }
            #bottomNav {
                background: #000;
            }

            #bottomNav > .active {
                background: #888888;
            }
        //if ie 6
          link(rel='stylesheet', href='ie6bereastreet.css', type='text/css')
    body
        #middlewrap.container
        #footerwrap
            #footer
                .col-xs-12.navbar-inverse.navbar-fixed-bottom
                    #bottomNav.row
                        a(href='./mobile').col-xs-4.text-center
                                i.glyphicon.glyphicon-home
                                br
                                | Home
                        a(href='./list').col-xs-4.text-center.active
                                i.glyphicon.glyphicon-list
                                br
                                | List Kit
                        a(href='./add').col-xs-4.text-center
                                i.glyphicon.glyphicon-plus
                                br
                                | Add Kit
        script(src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js")
        script(src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js")
        script(src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js")
        script.
          // A $( document ).ready() block.
          $(document).ready(function () {
            $.ajax({
              url: `/v1/kit`,
              type: "GET",
              dataType: "json",
              success: function (result) {
                console.log(result);
                result.kit.forEach(function(item){
                  const data = item.lastRecord.data;
                  let iconFeel = "";
                  let strAdvice = "";
                  let color = "";
                  if (data.pm25 <= 50) {
                    iconFeel = "feeling_lv1";
                    strAdvice = "Hãy đi chơi đâu đó.";
                    color = "#00A065";
                  }
                  else if (data.pm25 <= 100) {
                    iconFeel = "feeling_lv2";
                    strAdvice = "Hạn chế cho trẻ em ra ngoài chơi.";
                    color = "#FFE200";
                  }
                  else if (data.pm25 <= 150) {
                    iconFeel = "feeling_lv3";
                    strAdvice = "Không phải thời điểm ra ngoài thích hợp với người nhạy cảm.";
                    color = "#FF9400";
                  }
                  else if (data.pm25 <= 200) {
                    iconFeel = "feeling_lv4";
                    strAdvice = "Mọi người hạn chế ra ngoài!";
                    color = "#E10016";
                  }
                  else if (data.pm25 <= 300) {
                    iconFeel = "feeling_lv5";
                    strAdvice = "Cảnh báo cấp 1!!!";
                    color = "#74009F";
                  }
                  else {
                    iconFeel = "feeling_lv6";
                    strAdvice = "Cảnh báo khẩn cấp!!!";
                    color = "#8B0017";
                  }
                    var html = ''+
                    '<a href="./detail/'+item.kitID+'"><div class="panel panel-default">\n' +
                        '    <div class="panel-heading"><span style="color: blue;font-size:24px;font-weight:bold;">'+ item.name +'</span></div>\n' +
                        '    <div class="panel-body row">\n' +
                        '        <div class="col-xs-6 col-sm-6 col-md-6 row">\n' +
                        '            <div class="col-xs-12 col-sm-12 col-md-12">PM2.5: <span style="color: '+color+';font-size:24px;font-weight:bold;">'+data.pm25+'</span> μg/m³</div>\n' +
                        '            <div class="col-xs-12 col-sm-12 col-md-12">Temperature: '+data.temp+'°C</div>\n' +
                        '            <div class="col-xs-12 col-sm-12 col-md-12">Hudimity: '+data.hud+'%</div>\n' +
                        '        </div>\n' +
                        '        <div class="col-xs-6 col-sm-6 col-md-6 text-center"><img src="/imageFeeling/'+iconFeel+'.png"><i id="advice" style="color: '+color+';">'+strAdvice+'</i></div>\n' +
                        '        <div class="col-xs-12 col-sm-12 col-md-12 text-right"><i style="opacity: 0.35; font-size:12px;">Last Update: '+ moment(item.lastRecord.time).format('YYYY-MM-DD, HH:mm:ss') +'</i></div>\n' +
                        '    </div>\n' +
                        '</div></a>';
                    $('#middlewrap').append(html);
                });
              }
            });
          });
